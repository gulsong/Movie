(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e33798e"],{"341e":function(t,e,i){"use strict";i("e950")},"78a5":function(t,e,i){"use strict";i.r(e);var n=i("7a23"),c=Object(n["I"])("data-v-a6efa046");Object(n["u"])("data-v-a6efa046");var o={class:"city_body"},s={class:"city_list"},r={class:"city_hot"},a=Object(n["i"])("h2",null,"热门城市",-1),l={class:"clearfix"},d={class:"city_sort",ref:"city_sort"},u={class:"city_index"};Object(n["s"])();var O=c((function(t,e,i,O,b,j){var f=Object(n["z"])("Loading"),h=Object(n["z"])("Scroller");return Object(n["r"])(),Object(n["e"])("div",o,[Object(n["i"])("div",s,[b.isLoading?(Object(n["r"])(),Object(n["e"])(f,{key:0})):(Object(n["r"])(),Object(n["e"])(h,{key:1,ref:"city_list"},{default:c((function(){return[Object(n["i"])("div",null,[Object(n["i"])("div",r,[a,Object(n["i"])("ul",l,[(Object(n["r"])(!0),Object(n["e"])(n["a"],null,Object(n["x"])(b.hotList,(function(t){return Object(n["r"])(),Object(n["e"])("li",{key:t.id,onTap:function(e){return j.handleToCity(t.nm,t.id)}},Object(n["C"])(t.nm),41,["onTap"])})),128))])]),Object(n["i"])("div",d,[(Object(n["r"])(!0),Object(n["e"])(n["a"],null,Object(n["x"])(b.cityList,(function(t){return Object(n["r"])(),Object(n["e"])("div",{key:t.index},[Object(n["i"])("h2",null,Object(n["C"])(t.index),1),Object(n["i"])("ul",null,[(Object(n["r"])(!0),Object(n["e"])(n["a"],null,Object(n["x"])(t.list,(function(t){return Object(n["r"])(),Object(n["e"])("li",{key:t.id,onTap:function(e){return j.handleToCity(t.nm,t.id)}},Object(n["C"])(t.nm),41,["onTap"])})),128))])])})),128))],512)])]})),_:1},512))]),Object(n["i"])("div",u,[Object(n["i"])("ul",null,[(Object(n["r"])(!0),Object(n["e"])(n["a"],null,Object(n["x"])(b.cityList,(function(t,e){return Object(n["r"])(),Object(n["e"])("li",{key:t.index,onTouchstart:function(t){return j.handleToIndex(e)}},Object(n["C"])(t.index),41,["onTouchstart"])})),128))])])])})),b={name:"City",data:function(){return{cityList:[],hotList:[],isLoading:!0}},mounted:function(){var t=this,e=window.localStorage.getItem("cityList"),i=window.localStorage.getItem("hotList");e&&i?(this.cityList=JSON.parse(e),this.hotList=JSON.parse(i),this.isLoading=!1):this.$axios.get("/api/cityList").then((function(e){var i=e.data.msg;if("ok"===i){t.isLoading=!1;var n=e.data.data.cities,c=t.formatCityList(n),o=c.cityList,s=c.hotList;t.cityList=o,t.hotList=s,window.localStorage.setItem("cityList",JSON.stringify(o)),window.localStorage.setItem("hotList",JSON.stringify(s))}}))},methods:{formatCityList:function(t){for(var e=[],i=[],n=0;n<t.length;n++)1===t[n].isHot&&i.push(t[n]);for(n=0;n<t.length;n++){var c=t[n].py.substring(0,1).toUpperCase();if(s(c))e.push({index:c,list:[{nm:t[n].nm,id:t[n].id}]});else for(var o=0;o<e.length;o++)e[o].index===c&&e[o].list.push({nm:t[n].nm,id:t[n].id})}function s(t){for(var i=0;i<e.length;i++)if(e[i].index===t)return!1;return!0}return e.sort((function(t,e){return t.index>e.index?1:t.index<e.index?-1:0})),{cityList:e,hotList:i}},handleToIndex:function(t){var e=this.$refs.city_sort.getElementsByTagName("h2");this.$refs.city_list.toScrollTop(-e[t].offsetTop)},handleToCity:function(t,e){this.$store.commit("city/CITY_INFO",{nm:t,id:e}),window.localStorage.setItem("nowNm",t),window.localStorage.setItem("nowId",e),this.$router.push("/movie/nowPlaying")}}};i("341e");b.render=O,b.__scopeId="data-v-a6efa046";e["default"]=b},e950:function(t,e,i){}}]);
//# sourceMappingURL=chunk-1e33798e.5eca17c0.js.map
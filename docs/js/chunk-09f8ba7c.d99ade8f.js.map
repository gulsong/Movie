{"version":3,"sources":["webpack:///./src/components/Search/index.vue?38eb","webpack:///./src/components/Search/index.vue","webpack:///./src/components/Search/index.vue?f0db"],"names":["class","type","message","moviesList","item","key","id","handleToDetail","src","$filters","setWH","img","nm","sc","enm","cat","rt","name","data","methods","movieId","this","$router","push","cancelRequest","source","watch","newVal","that","cityId","$store","state","city","$axios","get","cancelToken","CancelToken","c","then","res","msg","movies","list","catch","err","isCancel","console","log","render","__scopeId"],"mappings":"uIAAA,W,wICCSA,MAAM,Y,GACFA,MAAM,e,GACFA,MAAM,gB,GACFA,MAAM,wB,EACP,eAAoC,KAAjCA,MAAM,wBAAsB,S,GAIlCA,MAAM,iB,EACP,eAAkB,UAAd,aAAS,G,GAIAA,MAAM,Q,wEAb/B,eAuBM,MAvBN,EAuBM,CAtBF,eAqBM,MArBN,EAqBM,CApBF,eAKM,MALN,EAKM,CAJF,eAGM,MAHN,EAGM,CAFF,E,eACA,eAAqC,SAA9BC,KAAK,O,qDAAgB,EAAAC,QAAO,K,mBAAP,EAAAA,eAGpC,eAaM,MAbN,EAaM,CAZF,EACA,eAUK,Y,mBATD,eAQK,2BARc,EAAAC,YAAU,SAAlBC,G,wBAAX,eAQK,MAR2BC,IAAKD,EAAKE,I,CACtC,eAAqG,OAAhGN,MAAM,MAAO,MAAG,mBAAE,EAAAO,eAAeH,EAAKE,M,CAAK,eAA+C,OAAzCE,IAAK,EAAAC,SAASC,MAAMN,EAAKO,IAAG,Y,+BAClF,eAKM,MALN,EAKM,CAJF,eAAsF,UAAnF,eAAuD,QAAhD,MAAG,mBAAE,EAAAJ,eAAeH,EAAKE,M,eAAOF,EAAKQ,IAAE,cAAS,eAAwB,2BAAhBR,EAAKS,IAAE,KACzE,eAAmB,wBAAdT,EAAKU,KAAG,GACb,eAAmB,wBAAdV,EAAKW,KAAG,GACb,eAAkB,wBAAbX,EAAKY,IAAE,U,iBAUzB,GACXC,KAAK,SACLC,KAFW,WAGP,MAAM,CACFhB,QAAQ,GACRC,WAAW,KAGnBgB,QAAS,CACLZ,eADK,SACUa,GACXC,KAAKC,QAAQC,KAAK,mBAAmBH,IAEzCI,cAJK,WAKuB,oBAAdH,KAAKI,QACXJ,KAAKI,OAAO,UAIxBC,MAAM,CACFxB,QADE,SACMyB,GAAO,WACPC,EAAKP,KACLQ,EAAOR,KAAKS,OAAOC,MAAMC,KAAK1B,GAClCe,KAAKG,gBACLH,KAAKY,OAAOC,IAAI,0BAA0BL,EAAO,OAAOF,EAAO,CAC3DQ,YAAY,IAAId,KAAKY,OAAOG,aAAY,SAASC,GAC7CT,EAAKH,OAAOY,OAEjBC,MAAK,SAACC,GACL,IAAIC,EAAID,EAAIrB,KAAKsB,IACbC,EAASF,EAAIrB,KAAKA,KAAKuB,OACxBD,GAAOC,IACN,EAAMtC,WAAWoC,EAAIrB,KAAKA,KAAKuB,OAAOC,SAE3CC,OAAM,SAACC,GACH,EAAKX,OAAOY,SAASD,GACpBE,QAAQC,IAAI,mBAAmBH,EAAI1C,SAGnC4C,QAAQC,IAAIH,S,UC7DhC,EAAOI,OAASA,EAChB,EAAOC,UAAY,kBAEJ","file":"js/chunk-09f8ba7c.d99ade8f.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=8ff1ee00&scoped=true&lang=css\"","<template>\r\n    <div class=\"search_b\">\r\n        <div class=\"search_body\">\r\n            <div class=\"search_input\">\r\n                <div class=\"search_input_wrapper\">\r\n                    <i class=\"iconfont icon-sousuo\"></i>\r\n                    <input type=\"text\" v-model=\"message\">\r\n                </div>\t\t\t\t\t\r\n            </div>\r\n            <div class=\"search_result\">\r\n                <h3>电影/电视剧/综艺</h3>\r\n                <ul>\r\n                    <li v-for=\"item in moviesList\" :key=\"item.id\">\r\n                        <div class=\"img\" @tap=\"handleToDetail(item.id)\"><img :src=\"$filters.setWH(item.img,'128.180')\"></div>\r\n                        <div class=\"info\">\r\n                            <p><span @tap=\"handleToDetail(item.id)\">{{item.nm}}</span><span>{{item.sc}}</span></p>\r\n                            <p>{{item.enm}}</p>\r\n                            <p>{{item.cat}}</p>\r\n                            <p>{{item.rt}}</p>\r\n                        </div>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name:'Search',\r\n    data(){\r\n        return{\r\n            message:'',\r\n            moviesList:[]\r\n        }\r\n    },\r\n    methods: {\r\n        handleToDetail(movieId){\r\n            this.$router.push('/movie/detail/3/'+movieId);\r\n        },\r\n        cancelRequest(){\r\n            if(typeof this.source==='function'){\r\n                this.source('终止请求')\r\n            }\r\n        }\r\n    },\r\n    watch:{\r\n        message(newVal){\r\n            var that=this;\r\n            var cityId=this.$store.state.city.id;\r\n            this.cancelRequest();\r\n            this.$axios.get('/api/searchList?cityId='+cityId+'&kw='+newVal,{\r\n                cancelToken:new this.$axios.CancelToken(function(c){\r\n                    that.source=c;\r\n                })\r\n            }).then((res)=>{\r\n                var msg=res.data.msg;\r\n                var movies = res.data.data.movies;\r\n                if(msg && movies){\r\n                    this. moviesList=res.data.data.movies.list;\r\n                }\r\n            }).catch((err)=>{\r\n                if(this.$axios.isCancel(err)){\r\n                    console.log('Request canceled',err.message);\r\n                }\r\n                else{\r\n                    console.log(err);\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n    #content .search_b{ margin-top: 45px; display: flex; width:100%; position: absolute; top: 50px; bottom: 50px;}\r\n    #content .search_body{ flex:1; overflow:auto;}\r\n    .search_body .search_input{ padding: 8px 10px; background-color: #f5f5f5; border-bottom: 1px solid #e5e5e5;}\r\n    .search_body .search_input_wrapper{ padding: 0 10px; border: 1px solid #e6e6e6; border-radius: 5px; background-color: #fff; display: flex; line-height: 20px;}\r\n    .search_body .search_input_wrapper i{font-size: 16px; padding: 4px 0;}\r\n    .search_body .search_input_wrapper input{ border: none; font-size: 13px; color: #333; padding: 4px 0; outline: none; margin-left: 5px; width:100%;}\r\n    .search_body .search_result h3{ font-size: 15px; color: #999; padding: 9px 15px; border-bottom: 1px solid #e6e6e6;}\r\n    .search_body .search_result li{ border-bottom:1px #c9c9c9 dashed; padding: 10px 15px; box-sizing:border-box; display: flex;}\r\n    .search_body .search_result .img{ width: 60px; float:left; }\r\n    .search_body .search_result .img img{ width: 100%; }\r\n    .search_body .search_result .info{ float:left; margin-left: 15px; flex:1;}\r\n    .search_body .search_result .info p{ height: 22px; display: flex; line-height: 22px; font-size: 12px;}\r\n    .search_body .search_result .info p:nth-of-type(1) span:nth-of-type(1){ font-size: 18px; flex:1; }\r\n    .search_body .search_result .info p:nth-of-type(1) span:nth-of-type(2){ font-size: 16px; color:#fc7103;}\r\n</style>","import { render } from \"./index.vue?vue&type=template&id=8ff1ee00&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=8ff1ee00&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-8ff1ee00\"\n\nexport default script"],"sourceRoot":""}